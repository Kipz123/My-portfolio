<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Blog - Allan Kaino</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,600i,700" rel="stylesheet">
    <link href="AllanKaino.net/portfolio/css/bootstrap.min.css" rel="stylesheet">
    <link href="AllanKaino.net/portfolio/css/component.css" rel="stylesheet">
    <link href="AllanKaino.net/portfolio/css/circle.css" rel="stylesheet">
    <link href="AllanKaino.net/portfolio/css/font-awesome.min.css" rel="stylesheet">
    <link href="AllanKaino.net/portfolio/css/style.css" rel="stylesheet">
    <link href="AllanKaino.net/portfolio/css/skins/yellow.css" rel="stylesheet">
    <script src="AllanKaino.net/portfolio/js/modernizr.min.js"></script>
    <style>
        .blog-card {
            background: #252525;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .blog-card img {
            width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        .blog-title {
            color: #ffb400;
            margin-bottom: 10px;
        }

        .blog-meta {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .blog-content {
            color: #eee;
        }

        .nav-home-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>

<body class="dark blog-page">
    <a href="/AllanKaino.net/portfolio/dark.html" class="button nav-home-btn">
        <span class="button-text">Home</span>
        <span class="button-icon fa fa-home"></span>
    </a>

    <div class="pages">
        <div class="page page--current">
            <div class="container main-container">
                <div class="title-section text-left text-sm-center">
                    <h2>My <span>Blog</span></h2>
                    <span class="title-bg">Posts</span>
                </div>

                <div id="blog-container" class="row">
                    <!-- Blog posts will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script src="AllanKaino.net/portfolio/js/jquery-3.5.0.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/api/blogs')
                .then(response => response.json())
                .then(blogs => {
                    const container = document.getElementById('blog-container');
                    blogs.forEach(blog => {
                        const col = document.createElement('div');
                        col.className = 'col-12 col-md-6 col-lg-4';

                        const card = document.createElement('div');
                        card.className = 'blog-card';

                        let imageHtml = '';
                        if (blog.imagePath) {
                            imageHtml = `<img src="/uploads/${blog.imagePath}" alt="${blog.title}">`;
                        }

                        const date = new Date(blog.createdAt).toLocaleDateString();

                        card.innerHTML = `
                        ${imageHtml}
                        <h3 class="blog-title">${blog.title}</h3>
                        <div class="blog-meta">
                            <span><i class="fa fa-user"></i> ${blog.author}</span>
                            <span class="ml-3"><i class="fa fa-calendar"></i> ${date}</span>
                        </div>
                        <p class="blog-content">${blog.content.substring(0, 100)}...</p>
                    `;

                        // Make card clickable
                        card.style.cursor = 'pointer';
                        card.onclick = function () {
                            window.location.href = `/blog-post.html?id=${blog.id}`;
                        };

                        col.appendChild(card);
                        container.appendChild(col);
                    });
                });
        });
    </script>
</body>

</html>